import React, { Component } from 'react';
import {BootstrapTable,
    TableHeaderColumn} from 'react-bootstrap-table';
import '../css/Table.css';
import '../../node_modules/react-bootstrap-table/css/react-bootstrap-table.css'
import axios from "axios";
import {onAfterInsertRow,onAfterDeleteRow,onAfterSaveCell} from "../apiNet"
import {customSaleField, customWeaponField,customMoodField} from "./Custom/EditorFieldTable";


const options = {
    afterInsertRow: onAfterInsertRow,
    afterDeleteRow: onAfterDeleteRow// A hook for after insert rows
};
const cellEditProp = {
    mode: 'click', // 'dbclick' for trigger by double-click
    afterSaveCell: onAfterSaveCell
}
// If you want to enable deleteRow, you must enable row selection also.
const selectRowProp = {
    mode: 'checkbox'
};

class Table1 extends Component {
    componentDidMount() {
        this.getAllObject()
        this.timer = setInterval(() => this.getAllObject(), 100000);
    }
    componentWillUnmount() {
        this.timer = null;
    }
    render() {
        return (
            <div>
                <BootstrapTable data={this.props.data}
                                cellEdit={cellEditProp}
                                insertRow={ true }
                                selectRow={ selectRowProp }
                                deleteRow={ true }
                                options={ options }
                                striped
                                hover>
                    <TableHeaderColumn isKey
                                       dataField='id'
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     headerAlign="left"
                                       width="5%"
                                       tdStyle={
                                           {backgroundColor: 'green'}}>
                        ID
                    </TableHeaderColumn>
                    <TableHeaderColumn dataField='name'
                                       dataAlign='center'
                                       headerAlign="center"
                                       width="20%"
                                       thStyle={
                                           {fontWeight: 'lighter',
                                               color: 'red'}}>
                        Name
                    </TableHeaderColumn>
                    <TableHeaderColumn dataField='realHero'
                                       dataAlign='center'
                                       headerAlign="center"
                                       customInsertEditor={{ getElement: customSaleField }}>
                        realHero
                    </TableHeaderColumn>
                    <TableHeaderColumn dataField='impactSpeed'
                                       dataAlign='center'
                                       headerAlign="center">
                        impactSpeed
                    </TableHeaderColumn>
                    <TableHeaderColumn dataField='weaponType'
                                       dataAlign='center'
                                       headerAlign="center"
                                       customInsertEditor={{ getElement: customWeaponField }}>
                        weaponType
                    </TableHeaderColumn>
                    <TableHeaderColumn dataField='moodType'
                                       dataAlign='center'
                                       headerAlign="center"
                                       customInsertEditor={{ getElement: customWeaponField }}>
                        moodType
                    </TableHeaderColumn>
                    <TableHeaderColumn dataField='car'
                                       dataAlign='center'
                                       headerAlign="center"
                                       customInsertEditor={{ getElement: customSaleField }}>
                        car
                    </TableHeaderColumn>
                    <TableHeaderColumn dataField='hasToothpick'
                                       dataAlign='center'
                                       headerAlign="center"
                                       customInsertEditor={{ getElement: customSaleField }}>
                        hasToothpick
                    </TableHeaderColumn>
                    <TableHeaderColumn dataField='x'
                                       dataAlign='center'
                                       headerAlign="center">
                        x
                    </TableHeaderColumn>
                    <TableHeaderColumn dataField='y'
                                       dataAlign='center'
                                       headerAlign="center">
                        y
                    </TableHeaderColumn>
                </BootstrapTable>
            </div>
        );
    }

    getAllObject() {
        axios.get("http://localhost:8081/LABSOA1_war_exploded/collection")
            .then(res => {
                const persons = res.data;
                if(persons!=null)
                 this.setState({ persons });
            })
    }
}

export default Table1;